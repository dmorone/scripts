#!/usr/bin/env bash
set -e
set -u
set -o pipefail

# Hey, futureself. Use videodownloadhelper to get URLs
if [ "$1" == rmc ]; then
  url='https://icy.unitedradio.it/RMC.aac?aw_0_req.userConsentV2=CQchkoAQchkoAB7FwBITCJFgAAAAAAAAAAAAAAAXsgLAA4AGaAZ8BHgCVQHbAQUAjSBIgCSgEowJkgUWAo4BVICrIFYAK5gV9AtWBbwC9gAwSDqAAuACgAKgAXAA4AB4AEAAL4AZABqADwAIYATAAqgBvAD8AISAQwBEgCOAE0AK0AYAAw4BlAGWANkAc8A7gDvgHsAfEA-wD9AIAARSAi4CMQEaARyAkQCTQE_AUGAqACrgFzAL0AYoA0QBtADcAHEAPaAh2BHoEigJpATsAocBR4CkQFNgLYAXAAuQBdgC7wF5gMNgZGBkgDJwGXAMzAZzA1cDWQGxgNoAbeA3MBuoDkwHLgPHAfGA_4CAgEEwIMAQhghaCF8EPQQ_Aj6BIqCTAJMgSzAluBL4CYAEywJnATVAmwBNwCcwE6QJ3ATwgoOChAFCwKKgUlApcBTICnkFPwVAAqMBU4CroFbAK3gV8AsKBY4CyoFpoLWAtaBbkC4oF6h0IcABcAFAAVAA4ACCAFwAXwAyADUAHgATAApgBVgC4ALoAYgA3gB-gEMARIAjgBNACjAFaAMAAYYAygBogDZAHPAO4A74B7AHxAPsA_YCKAIxARwBJoCfgKDAVEBVwCxAFzgLyAvQBigDaAG4gOIA4wB7QD7AIQAQ6AicBF8CPQJFATIAmkBOwCh4FHgUgApMBTYCrAFigLYAW6AuABckC7ALtAXeAvMBfQDDQGPQMjAyQBk4DKoGWAZcAzMBnIDTQGqwNXA1gBtADbwG6gOLAcmA5cB44D4wH1gPuAf2A_4CAIEBAIMAQtAh6BHYCPoEhAJFASZAlXBLMEtAJdAS-AmABMsCZwE1QJsATcAnMBOmCdoJ3ATwAnmBQYChAFCwKJAUVApKBS4CngFPwKjAVOgq4CroFbAK3gWDAsmBZWC1gLWgW5At2BcUC44FywL1EIHwACwAKAAuABqAFUALgAYgA3gB-AGAAOeAdwB3gEUAI4ASkAoMBUQFXALmAYoA2gBxgEOgInAR6AmkBSYCmwFWALFAWiAuABcgC7AGRgMnAZyA1UB44D4wH9gQEAgwBC0CHoEhAJFAS6AmcBNgCcwE7gJ4ATzAoMBRUCkoFLgKfgVfAsEBa0C3JKCcAAsACgAHAAeABDACYAFUALgAYoBDAESAI4AUYArQBgADZAHeAPwAjkBUQFXALmAYoA4gCEAEOgIvgR6BIoCjwFJwKaApsBYoC2AFyALsAXnAyMDJAGTgMsAZyA1gBt4D4wIAgQEAgeBBgCEIEPQI-gSKAkqBKsCVoEugJfATOAmqBNgCbgE5oJ2gncBPACeYFFQKSgUuAp4BUYCpwFbAK3wWCBYMCxYFlYLWAtaBbkC5AFywL1FIN4AC4AKAAqABwAEEAMgA0AB4AEMAJgAVQAxAB-gEMARIAjgBRgCtAGAAMoAaIA2QBzgDvgH2AfoBFgCMQEcASUAoMBUQFXALmAXkAxQBtADcQHEAcYA9oB9gEOgInARfAj0CRQE0gJ2AUOApABScCmgKbAVYAsUBbAC4AFyQLsAu0BeYC-gGGwMjAyQBk8DLAMuAZzA1gDWQG3gN1AcmA8UB44D4wH9gP-AgIBBMCDAEIQIWgQzAhyBHYCPoEioJMAkyBKsCWYEugJfATAAmWBM4CaoE2AJzQTtBO4CeAE8wKFgUVApKBS4CngFPwKjAVOArYBW8CwQFhQLFgWTAsrBawFrQLcgXFAuQBeotAcABqAEMAYAA7gCOAF6APsAoeBTQFNgKsAXAAuwBmYDxwICAQ9AmwBNwCcwE7gJ4AUkApcBYUCxIFrQLcgW7&listenerId='
elif [ "$1" == rts ]; then
  url='https://stxt-audiostreaming.akamaized.net/hls/live/2117380/la-1ere/variant-96.m3u8'
elif [ "$1" == 3i ]; then
  url='https://icecast.gruppocdt.ch/radio3i-256.mp3'
elif [ "$1" == jazz ]; then
  url='https://livestreaming-node-2.srg-ssr.ch/srgssr/rsj/aac/96'
elif [ "$1" == cla ]; then
  url='https://livestreaming-node-1.srg-ssr.ch/srgssr/rsc_de/aac/96'
elif [ "$1" == grischa ]; then
  url='https://somedia-3.streaming.deliver.media/radiogrischa_mp3_128?suffix0=webseite&_ic2=1765882061'
elif [ "$1" == lattemiele ]; then
  url='https://sr15.inmystream.it/stream/lattemiele'
else
  echo "don't know $1" 1>&2
  exit 1
fi

exec mpv "$url"
